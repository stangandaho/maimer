<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Standardize community data matrix — mm_standardize • maimer</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Montserrat-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Standardize community data matrix — mm_standardize"><meta name="description" content="This function standardizes a given data matrix using different methods such as
total sum scaling, max normalization, frequency scaling, standardization,
presence-absence transformation, chi-square transformation,
Hellinger transformation, log transformation, and others."><meta property="og:description" content="This function standardizes a given data matrix using different methods such as
total sum scaling, max normalization, frequency scaling, standardization,
presence-absence transformation, chi-square transformation,
Hellinger transformation, log transformation, and others."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">maimer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-code"></span> Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-blog"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/camtrap_data_preparation.html">1. Data preparation</a></li>
    <li><a class="dropdown-item" href="../articles/camtrap_data_analysis.html">2. Data analysis</a></li>
    <li><a class="dropdown-item" href="../articles/camtrap_analysis_visualisation.html">3. Elegant visualizations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-face-smile"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stangandaho/maimer" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.linkedin.com/in/stangandaho/" aria-label="LinkedIn"><span class="fa fa-linkedin"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Standardize community data matrix</h1>

      <div class="d-none name"><code>mm_standardize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function standardizes a given data matrix using different methods such as
total sum scaling, max normalization, frequency scaling, standardization,
presence-absence transformation, chi-square transformation,
Hellinger transformation, log transformation, and others.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mm_standardize</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  <span class="va">margin</span>,</span>
<span>  <span class="va">range_global</span>,</span>
<span>  logbase <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A numeric matrix or data frame to be standardized.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A character string specifying the standardization method (see details).
Available methods are:</p><ul><li><p><code>"total"</code>: Divides each entry by the total sum in the given margin.</p></li>
<li><p><code>"max"</code>: Divides each entry by the maximum value in the given margin.</p></li>
<li><p><code>"frequency"</code>: Frequency transformation.</p></li>
<li><p><code>"normalize"</code>: Normalization by Euclidean norm.</p></li>
<li><p><code>"range"</code>: Standardizes by range (min-max scaling).</p></li>
<li><p><code>"rank"</code>: Converts values to ranks.</p></li>
<li><p><code>"rrank"</code>: Relative rank transformation.</p></li>
<li><p><code>"standardize"</code>: Standardization (z-score normalization).</p></li>
<li><p><code>"pa"</code>: Presence-absence transformation (binary).</p></li>
<li><p><code>"chi.square"</code>: Chi-square standardization.</p></li>
<li><p><code>"hellinger"</code>: Hellinger transformation.</p></li>
<li><p><code>"log"</code>: Log transformation.</p></li>
<li><p><code>"clr"</code>: Centered log-ratio transformation.</p></li>
<li><p><code>"rclr"</code>: Robust centered log-ratio transformation.</p></li>
<li><p><code>"alr"</code>: Additive log-ratio transformation.</p></li>
</ul></dd>


<dt id="arg-margin">margin<a class="anchor" aria-label="anchor" href="#arg-margin"></a></dt>
<dd><p>An integer specifying the margin for standardization:</p><ul><li><p><code>1</code>: Rows</p></li>
<li><p><code>2</code>: Columns</p></li>
</ul></dd>


<dt id="arg-range-global">range_global<a class="anchor" aria-label="anchor" href="#arg-range-global"></a></dt>
<dd><p>A matrix specifying the range for standardization
(optional, used with <code>"range"</code> method).</p></dd>


<dt id="arg-logbase">logbase<a class="anchor" aria-label="anchor" href="#arg-logbase"></a></dt>
<dd><p>The base for logarithmic transformation (default is 2).</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, missing values (<code>NA</code>) are removed before calculations.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to transformation functions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A standardized matrix or tibble with attributes specifying the
transformation applied.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function provides the following standardization methods for community data:</p>
<ul><li><p><code>"total"</code>: Divides by margin total (default <code>margin = 1</code>).</p></li>
<li><p><code>"max"</code>: Divides by margin maximum (default <code>margin = 2</code>).</p></li>
<li><p><code>"frequency"</code>: Divides by margin total and multiplies by the
number of non-zero items, ensuring the average of non-zero entries is one
(Oksanen 1983; default <code>margin = 2</code>).</p></li>
<li><p><code>"normalize"</code>: Scales data so that the sum of squares along the
specified margin equals one (default <code>margin = 1</code>).</p></li>
<li><p><code>"range"</code>: Standardizes values into the range <code>[0,1]</code> (default <code>margin = 2</code>).
If all values are constant, they will be transformed to 0.</p></li>
<li><p><code>"rank"</code>, <code>"rrank"</code>:</p><ul><li><p><code>"rank"</code> replaces abundance values by their increasing ranks, leaving zeros unchanged.</p></li>
<li><p><code>"rrank"</code> is similar but uses relative ranks with a maximum of 1 (default <code>margin = 1</code>).</p></li>
</ul></li>
<li><p><code>"standardize"</code>: Scales <code>x</code> to zero mean and unit variance (default <code>margin = 2</code>).</p></li>
<li><p><code>"pa"</code>: Converts <code>x</code> to presence/absence scale (0/1).</p></li>
<li><p><code>"chi.square"</code>: Divides by row sums and the square root of column sums,
then adjusts for the square root of the matrix total (Legendre &amp; Gallagher 2001).
When used with Euclidean distance, the distances should be similar to Chi-square
distances in correspondence analysis (default <code>margin = 1</code>).</p></li>
<li><p><code>"hellinger"</code>: Computes the square root of <code>method = "total"</code> (Legendre &amp; Gallagher 2001).</p></li>
<li><p><code>"log"</code>: Logarithmic transformation suggested by Anderson et al. (2006):
$$\log_b (x) + 1$$ for \(x &gt; 0\), where \(b\) is the base of the logarithm.
Zeros remain unchanged. Higher bases give less weight to quantities and more to presences.</p></li>
<li><p><code>"alr"</code>: Additive log ratio (ALR) transformation (Aitchison 1986).
Reduces skewness and compositional bias. Requires positive values; pseudocounts can be added.
The transformation is defined as:
$$alr = [\log(x_1 / x_D), ..., \log(x_{D-1} / x_D)]$$
where the denominator sample \(x_D\) can be chosen arbitrarily.</p></li>
<li><p><code>"clr"</code>: Centered log ratio (CLR) transformation (Aitchison 1986).
Common in microbial ecology (Gloor et al. 2017). Only supports positive data;
pseudocounts can be used to handle zeros. The transformation is defined as:
$$clr = \log(x / g(x)) = \log x - \log g(x)$$
where \(x\) is a single value, and \(g(x)\) is the geometric mean of \(x\).</p></li>
<li><p><code>"rclr"</code>: Robust CLR transformation. Unlike CLR, this method allows zeros
without requiring pseudocounts. It divides values by the geometric mean of
observed (non-zero) features, preserving zeros (Martino et al. 2019). The transformation is defined as:
$$rclr = \log(x / g(x &gt; 0))$$
where \(x\) is a single value, and \(g(x &gt; 0)\) is the geometric mean
of sample-wide values \(x\) that are positive (\(x &gt; 0\)).</p></li>
</ul><p>Standardization, as contrasted to transformation, means that the
entries are transformed relative to other entries.</p>
<p>All methods have a default margin. <code>margin=1</code> means rows
(sites in a normal data set) and <code>margin=2</code> means columns (species in a
normal data set).</p>
<p>Command <code>wisconsin</code> is a shortcut to common Wisconsin double
standardization where species (<code>margin=2</code>) are first standardized
by maxima (<code>max</code>) and then sites (<code>margin=1</code>) by
site totals (<code>tot</code>).</p>
<p>Most standardization methods will give nonsense results with
negative data entries that normally should not occur in the community
data. If there are empty sites or species (or constant with
<code>method =  "range"</code>), many standardization will change these into
<code>NaN</code>.</p>
<p>Function <code>decobackstand</code> can be used to transform standardized
data back to original. This is not possible for all standardization
and may not be implemented to all cases where it would be
possible. There are round-off errors and back-transformation is not
exact, and it is wise not to overwrite the original data. With
<code>zap=TRUE</code> original zeros should be exact.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function is adapted from the <code>decostand</code> function in the <code>vegan</code> R package,
with modifications to improved handling.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Aitchison, J. The Statistical Analysis of Compositional Data (1986).
London, UK: Chapman &amp; Hall.</p>
<p>Anderson, M.J., Ellingsen, K.E. &amp; McArdle, B.H. (2006) Multivariate
dispersion as a measure of beta diversity. <em>Ecology Letters</em>
<strong>9</strong>, 683–693.</p>
<p>Egozcue, J.J., Pawlowsky-Glahn, V., Mateu-Figueras, G.,
Barcel'o-Vidal, C. (2003) Isometric logratio transformations for
compositional data analysis. <em>Mathematical Geology</em> <strong>35</strong>, 279–300.</p>
<p>Gloor, G.B., Macklaim, J.M., Pawlowsky-Glahn, V. &amp; Egozcue, J.J. (2017)
Microbiome Datasets Are Compositional: And This Is Not Optional.
<em>Frontiers in Microbiology</em> <strong>8</strong>, 2224.</p>
<p>Legendre, P. &amp; Gallagher, E.D. (2001) Ecologically meaningful
transformations for ordination of species data. <em>Oecologia</em>
<strong>129</strong>, 271–280.</p>
<p>Martino, C., Morton, J.T., Marotz, C.A., Thompson, L.R., Tripathi, A.,
Knight, R. &amp; Zengler, K. (2019) A novel sparse compositional technique
reveals microbial perturbations. <em>mSystems</em> <strong>4</strong>, 1.</p>
<p>Oksanen, J. (1983) Ordination of boreal heath-like vegetation with
principal component analysis, correspondence analysis and
multidimensional scaling. <em>Vegetatio</em> <strong>52</strong>, 181–189.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example usage with sample data</span></span></span>
<span class="r-in"><span><span class="va">cam_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'penessoulou_season1.csv'</span>, package <span class="op">=</span> <span class="st">'maimer'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cam_data</span> <span class="op">&lt;-</span> <span class="va">cam_data</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="mm_to_community.html">mm_to_community</a></span><span class="op">(</span>site_column <span class="op">=</span> <span class="va">camera</span>, species_column <span class="op">=</span> <span class="va">species</span>,</span></span>
<span class="r-in"><span>                  size_column <span class="op">=</span> <span class="va">number</span>, values_fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">standardized_data</span> <span class="op">&lt;-</span> <span class="fu">mm_standardize</span><span class="op">(</span>data <span class="op">=</span> <span class="va">cam_data</span><span class="op">[</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">11</span><span class="op">]</span>, method <span class="op">=</span> <span class="st">"total"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">standardized_data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 13 × 10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    `Syncerus caffer` `Lepus crawshayi` `Erythrocebus patas`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>            0.981              0                   0.016<span style="text-decoration: underline;">9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>            0                  0.375               0.5   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>            0.430              0                   0.522 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>            0.941              0                   0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>            0                  0                   0.071<span style="text-decoration: underline;">4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>            0.480              0                   0.341 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>            0                  0                   1     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>            0.247              0                   0.306 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>            0                  0                   0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>            0                  0                   0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>            0                  0                   0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>            0                  0                   0     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span>            0.024<span style="text-decoration: underline;">0</span>             0                   0.974 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 7 more variables: `Tragelaphus scriptus` &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `Chlorocebus aethiops` &lt;dbl&gt;, `Canis adustus` &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `Mellivora capensis` &lt;dbl&gt;, `Sylvicapra grimmia` &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `Thryonomys swinderianus` &lt;dbl&gt;, `Genetta genetta` &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stanislas Mahussi Gandaho.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

