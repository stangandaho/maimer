% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mm_correct_datetime.R
\name{mm_correct_datetime}
\alias{mm_correct_datetime}
\title{Correct camera trap datetime records}
\usage{
mm_correct_datetime(data, datetime, deployment, corrector, format = NULL)
}
\arguments{
\item{data}{A data.frame or tibble containing camera trap records with
datetime information that needs correction.}

\item{datetime}{Column name (unquoted) in \code{data} containing the datetime
values to be corrected. Can be character or POSIXct format.}

\item{deployment}{Column name (unquoted) in both \code{data} and
\code{corrector} that identifies unique camera deployments (e.g., camera ID,
site name, or deployment identifier).}

\item{corrector}{A data.frame containing correction information with columns:
\itemize{
\item deployment column matching the deployment parameter
\item \code{sign} - character indicating correction direction ("+" or "-")
\item \code{datetimes} - reference datetime showing the correct time
}}

\item{format}{Optional datetime format specification. Can be:
\itemize{
\item \code{NULL} (default) - attempts multiple common formats
\item Single format string - used for both \code{data} and \code{corrector} datetimes
\item Vector of 2 format strings - first for data, second for corrector
}}
}
\value{
A data.frame with the original data plus additional columns:
\itemize{
\item \code{corrected_datetime} - corrected datetime as POSIXct
\item \code{correction_applied} - sign of correction applied
\item \code{time_offset_seconds} - magnitude of correction in seconds
\item \code{corrector_reference} - reference datetime used for correction
}
}
\description{
This function corrects datetime stamps in camera trap data using a reference
correction table. It applies time adjustments based on known timing errors
for each camera deployment.
}
\examples{
# Load camera trap data
library(dplyr)

camtrap_data <- read.csv(maimer:::table_files()[1]) \%>\%
  dplyr::filter(project == "Last")

# Create correction table
# CAMERA 1 was running slow (+), CAMERA 2 was running fast (-)
crtor <- data.frame(
  camera = c("CAMERA 1", "CAMERA 2"),
  sign = c("+", "-"),
  datetimes = c("2025-03-14 8:17:00", "2024-11-14 10:02:03")
)

# Apply datetime corrections
mm_correct_datetime(
  data = camtrap_data,
  datetime = datetimes,
  deployment = camera,
  corrector = crtor
) \%>\%
  dplyr::select(datetimes,
                corrected_datetime,
                time_offset_seconds) \%>\%
  dplyr::slice_head(n = 10)

}
